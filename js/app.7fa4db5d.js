(function(e){function t(t){for(var s,o,c=t[0],a=t[1],i=t[2],p=0,h=[];p<c.length;p++)o=c[p],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&h.push(r[o][0]),r[o]=0;for(s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s]);u&&u(t);while(h.length)h.shift()();return n.push.apply(n,i||[]),l()}function l(){for(var e,t=0;t<n.length;t++){for(var l=n[t],s=!0,c=1;c<l.length;c++){var a=l[c];0!==r[a]&&(s=!1)}s&&(n.splice(t--,1),e=o(o.s=l[0]))}return e}var s={},r={app:0},n=[];function o(t){if(s[t])return s[t].exports;var l=s[t]={i:t,l:!1,exports:{}};return e[t].call(l.exports,l,l.exports,o),l.l=!0,l.exports}o.m=e,o.c=s,o.d=function(e,t,l){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:l})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var l=Object.create(null);if(o.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(l,s,function(t){return e[t]}.bind(null,s));return l},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/sudoku/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],a=c.push.bind(c);c.push=t,c=c.slice();for(var i=0;i<c.length;i++)t(c[i]);var u=a;n.push([0,"chunk-vendors"]),l()})({0:function(e,t,l){e.exports=l("cd49")},"2a45":function(e){e.exports=JSON.parse('[{"name":"Empty (424i)","cells":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},{"name":"1 cell left (0i)","cells":[6,8,5,7,4,9,2,1,3,3,1,2,5,8,6,4,7,9,9,4,7,3,1,2,5,6,8,7,2,1,0,9,8,3,4,5,5,3,9,2,7,4,6,8,1,8,6,4,1,5,3,9,2,7,2,9,8,4,3,1,7,5,6,1,5,6,9,2,7,8,3,4,4,7,3,8,6,5,1,9,2]},{"name":"1 Square left (6-9i)","cells":[6,8,5,7,4,9,2,1,3,3,1,2,5,8,6,4,7,9,9,4,7,3,1,2,5,6,8,7,2,1,0,0,0,3,4,5,5,3,9,0,0,0,6,8,1,8,6,4,0,0,0,9,2,7,2,9,8,4,3,1,7,5,6,1,5,6,9,2,7,8,3,4,4,7,3,8,6,5,1,9,2]},{"name":"Easy 1 (346i)","cells":[0,2,9,7,6,3,8,0,1,3,0,8,0,1,0,6,0,0,5,6,1,9,0,0,0,0,3,0,0,0,6,0,2,3,0,5,6,0,0,0,4,0,0,0,8,2,0,0,8,3,1,4,0,0,8,0,2,1,0,0,0,6,4,0,4,5,0,0,6,0,0,0,0,9,0,2,0,0,0,0,0]},{"name":"Easy 2 (520i)","cells":[5,3,0,0,7,0,0,0,0,6,0,0,1,9,5,0,0,0,0,9,8,0,0,0,0,6,0,8,0,0,0,6,0,0,0,3,4,0,0,8,0,3,0,0,1,7,0,0,0,2,0,0,0,6,0,6,0,0,0,0,2,8,0,0,0,0,4,1,9,0,0,5,0,0,0,0,8,0,0,7,9]},{"name":"Test horizontal line A (6i)","cells":[5,3,4,6,0,0,0,0,0,0,0,0,0,0,0,3,4,8,1,9,8,3,4,2,0,0,0,8,5,9,7,6,1,4,2,3,4,2,6,8,5,3,7,9,1,7,1,3,9,2,4,8,5,6,9,6,1,5,3,7,2,8,4,2,8,7,4,1,9,6,3,5,3,4,5,2,8,6,1,7,9]},{"name":"Test horizontal line B (6i)","cells":[5,3,4,6,0,0,0,0,0,0,0,0,0,0,0,3,4,8,1,9,8,3,4,2,0,0,0,8,5,9,7,6,1,4,2,3,4,2,6,8,5,3,7,9,1,7,1,3,9,2,4,8,5,6,9,6,1,5,3,7,2,8,4,2,8,7,4,1,9,6,3,5,3,4,5,2,8,6,1,7,9],"lines":[{"cell":25,"type":1},{"cell":5,"type":1}]},{"name":"Lot of lines (35-67i)","cells":[0,0,0,0,0,0,4,0,6,0,0,0,0,0,0,7,0,9,0,0,0,0,0,0,1,0,3,9,1,2,6,0,8,3,0,5,3,0,0,9,1,2,0,0,8,6,0,8,3,0,5,9,1,2,8,9,1,5,0,7,0,0,0,2,0,0,8,9,1,0,0,0,5,0,7,2,0,4,0,0,0],"lines":[{"cell":1,"type":1},{"cell":4,"type":1},{"cell":7,"type":1},{"cell":9,"type":0},{"cell":10,"type":2},{"cell":11,"type":0},{"cell":13,"type":1},{"cell":16,"type":1},{"cell":19,"type":1},{"cell":22,"type":1},{"cell":25,"type":1},{"cell":31,"type":1},{"cell":34,"type":1},{"cell":37,"type":1},{"cell":38,"type":0},{"cell":42,"type":0},{"cell":43,"type":1},{"cell":46,"type":1},{"cell":49,"type":1},{"cell":58,"type":1},{"cell":61,"type":1},{"cell":64,"type":1},{"cell":65,"type":0},{"cell":69,"type":0},{"cell":70,"type":2},{"cell":73,"type":1},{"cell":76,"type":1}]}]')},"393c":function(e,t,l){},cd49:function(e,t,l){"use strict";l.r(t);var s=l("7a23");const r={class:"board"},n={key:0},o=["onUpdate:modelValue","onInput"],c={key:2,class:"vl"},a={key:3,class:"hl"},i={class:"buttons"},u={class:"logs"};function p(e,t,l,p,h,d){return Object(s["g"])(),Object(s["d"])(s["a"],null,[Object(s["e"])("div",r,[(Object(s["g"])(!0),Object(s["d"])(s["a"],null,Object(s["k"])(e.board.cells,(t,l)=>(Object(s["g"])(),Object(s["d"])("div",{class:Object(s["f"])("cell "+(t.editable?"":"readonly")),key:l},[t.editable?Object(s["n"])((Object(s["g"])(),Object(s["d"])("input",{key:1,"onUpdate:modelValue":e=>t.value=e,type:"number",min:"1",max:"9",onInput:t=>e.validateInput(l,t.data)},null,40,o)),[[s["m"],t.value]]):(Object(s["g"])(),Object(s["d"])("span",n,Object(s["l"])(t.value),1)),0===e.board.lines[l]||2===e.board.lines[l]?(Object(s["g"])(),Object(s["d"])("div",c)):Object(s["c"])("",!0),1===e.board.lines[l]||2===e.board.lines[l]?(Object(s["g"])(),Object(s["d"])("div",a)):Object(s["c"])("",!0)],2))),128))]),Object(s["e"])("div",i,[Object(s["e"])("select",{onChange:t[0]||(t[0]=(...t)=>e.changePreset&&e.changePreset(...t))},[(Object(s["g"])(!0),Object(s["d"])(s["a"],null,Object(s["k"])(e.presets,(e,t)=>(Object(s["g"])(),Object(s["d"])("option",{key:t},Object(s["l"])(e.name),1))),128))],32),Object(s["e"])("button",{onClick:t[1]||(t[1]=(...t)=>e.solve&&e.solve(...t))},"Solve"),Object(s["e"])("button",{onClick:t[2]||(t[2]=t=>e.stop())},"Stop")]),Object(s["e"])("div",u,[(Object(s["g"])(!0),Object(s["d"])(s["a"],null,Object(s["k"])(e.logs,(t,l)=>(Object(s["g"])(),Object(s["d"])("div",{key:l},Object(s["l"])(e.logs[e.logs.length-l-1]),1))),128))])],64)}var h=l("ce1f");class d{constructor(){this.value=null,this.editable=!0}}class b{constructor(){this.cells=[],this.lines=[],this.getCell=(e,t)=>this.cells[e+9*t].value,this.reset()}loadPreset(e,t){for(let l=0;l<81;l++)this.cells[l].value=e[l]?e[l]:null;this.freeze(),this.lines=[],t&&t.forEach(e=>this.lines[e.cell]=e.type)}freeze(){this.cells.forEach(e=>e.editable=!e.value)}reset(){for(let e=0;e<81;e++)this.cells[e]=new d}getErrors(){let e=0;for(let t=0;t<81;t++)this.isValid(t%9,Math.floor(t/9))||e++;return e}isValid(e,t){const l=this.getCell(e,t);if(!l)return!0;for(let u=e+1;u<9;u++)if(l===this.getCell(u,t))return!1;for(let u=t+1;u<9;u++)if(l===this.getCell(e,u))return!1;const s=e+9*t;if(1===this.lines[s]||2===this.lines[s]){var r,n;const s=null!==(r=this.getCell(e-1,t))&&void 0!==r?r:0,o=null!==(n=this.getCell(e+1,t))&&void 0!==n?n:0;if(s+o!==2*l)return!1}if(0===this.lines[s]||2===this.lines[s]){var o,c;const s=null!==(o=this.getCell(e,t-1))&&void 0!==o?o:0,r=null!==(c=this.getCell(e,t+1))&&void 0!==c?c:0;if(s+r!==2*l)return!1}const a=3*Math.floor(t/3),i=3*Math.floor(e/3);for(let u=a;u<a+3;u++)for(let s=i;s<i+3;s++)if(e!==s&&t!==u&&l===this.getCell(s,u))return!1;return!0}}l("14d9");class f{constructor(){this.animationSpeed=100,this.stopTriggered=!1,this.stop=()=>this.stopTriggered=!0,this.getRandom=e=>e[Math.floor(Math.random()*e.length)]}run(e){const t=[];this.generateGuess(e);const l=this.getSwaps(e);return this.animatedLoop(e,l,t),t}getSwaps(e){const t=this.getEditableCells(e),l=[];return t.forEach(e=>t.forEach(t=>{const s=Math.floor(e%9/3),r=Math.floor(t%9/3),n=Math.floor(e/27),o=Math.floor(t/27);e!==t&&s===r&&n===o&&l.push({a:e,b:t})})),l}getEditableCells(e){const t=[];for(let l=0;l<e.cells.length;l++)e.cells[l].editable&&t.push(l);return t}generateGuess(e){for(let t=0;t<9;t++){let l=[1,2,3,4,5,6,7,8,9];for(let s=0;s<9;s++){const r=e.cells[this.getIndexFromSquare(t,s)].value;l=l.filter(e=>e!==r)}for(let s=0;s<9;s++){const r=e.cells[this.getIndexFromSquare(t,s)];r.value||(r.value=l.pop())}}}getIndexFromSquare(e,t){const l=3*Math.floor(e%3)+Math.floor(t%3),s=3*Math.floor(e/3)+Math.floor(t/3);return l+9*s}animatedLoop(e,t,l){let s=e.getErrors();if(0===t.length&&s>0)return void l.push("Unsolveable");let r=0;l.push(`0) ${s} error(s)`);const n=()=>{r++;const o=this.findBestSwap(e,t);this.runSwap(o.bestSwap,e),s===o.bestResult&&this.runSwap(this.getRandom(t),e),s=o.bestResult,l.push(`${r}) ${s} error(s), swap ${o.bestSwap.a} and ${o.bestSwap.b}`),s>0&&!this.stopTriggered?setTimeout(()=>n(),this.animationSpeed):this.stopTriggered=!1};s>0&&n()}findBestSwap(e,t){let l,s=1/0;return t.forEach(t=>{const r=this.getGuessScore(t,e);r>=s||(s=r,l=t)}),{bestResult:s,bestSwap:l}}getGuessScore(e,t){this.runSwap(e,t);const l=t.getErrors();return this.runSwap(e,t),l}runSwap(e,t){const l=t.cells[e.a].value,s=t.cells[e.b].value;t.cells[e.a].value=s,t.cells[e.b].value=l}}class g extends h["a"]{constructor(){super(...arguments),this.board=Object(s["i"])(new b),this.presets=l("2a45"),this.solver=new f,this.logs=Object(s["i"])([])}validateInput(e,t){t&&(!isNaN(+t)&&+t<=9&&+t>=1?this.board.cells[e].value=+t:this.board.cells[e].value=null)}changePreset(e){const t=e.target.value,l=this.presets.find(e=>e.name===t);this.board.loadPreset(l.cells,l.lines)}solve(){this.logs=this.solver.run(this.board)}stop(){this.solver.stop()}}l("e159");var v=l("6b0d"),y=l.n(v);const O=y()(g,[["render",p]]);var j=O;Object(s["b"])(j).mount("#app")},e159:function(e,t,l){"use strict";l("393c")}});
//# sourceMappingURL=app.7fa4db5d.js.map